<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>3-Month Interval Calculator</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-r from-indigo-100 via-purple-100 to-pink-100 min-h-screen flex flex-col items-center justify-start p-6">

  <h1 class="text-3xl font-extrabold mb-8 text-gray-800 text-center">3-Month Interval Dates Calculator</h1>

  <div class="bg-white shadow-xl rounded-2xl p-8 w-full max-w-lg">
    <label class="block mb-2 font-semibold text-gray-700">Enter Starting Date:</label>
    <input type="date" id="startDate" class="w-full p-3 border border-gray-300 rounded-lg mb-4 focus:outline-none focus:ring-2 focus:ring-indigo-400">
    <button onclick="calculateIntervals()" class="w-full bg-indigo-500 text-white font-semibold py-3 rounded-lg hover:bg-indigo-600 transition-colors">Calculate Intervals</button>
  </div>

  <div id="output" class="mt-8 w-full max-w-lg"></div>

<script>
function isLeapYear(year) {
    return (year % 4 === 0 && year % 100 !== 0) || (year % 400 === 0);
}

function getDaysInMonth(month, year) {
    return [31, (isLeapYear(year)?29:28), 31,30,31,30,31,31,30,31,30,31][month-1];
}

function getMonthName(month) {
    return ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][month-1];
}

function calculateIntervals() {
    const startInput = document.getElementById('startDate').value;
    if(!startInput) return alert('Please select a date!');

    const startDate = new Date(startInput);
    let day = startDate.getDate();
    let month = startDate.getMonth() + 1;
    let year = startDate.getFullYear();

    const today = new Date();
    const outputDiv = document.getElementById('output');
    outputDiv.innerHTML = "<h2 class='text-2xl font-bold mb-4 text-gray-800 text-center'>3-Month Interval Dates:</h2>";

    let count = 1;
    let nextInterval = null;

    while(true) {
        month += 3;
        if(month > 12){
            year += Math.floor((month-1)/12);
            month = ((month-1)%12) + 1;
        }

        let maxDay = getDaysInMonth(month, year);
        let displayDay = day > maxDay ? maxDay : day;

        const intervalDate = new Date(year, month-1, displayDay);

        if(intervalDate > today && !nextInterval) {
            nextInterval = intervalDate;
        }

        if(intervalDate <= today) {
            const dateStr = `${String(displayDay).padStart(2,'0')} ${getMonthName(month)} ${year}`;
            outputDiv.innerHTML += `<p class="p-3 bg-gradient-to-r from-indigo-200 via-purple-200 to-pink-200 rounded-xl mb-2 shadow-md text-gray-800 font-medium hover:scale-105 transform transition duration-200">${count}. ${dateStr}</p>`;
            count++;
        } else {
            break;
        }
    }

    if(nextInterval) {
        const nextDateStr = `${String(nextInterval.getDate()).padStart(2,'0')} ${getMonthName(nextInterval.getMonth()+1)} ${nextInterval.getFullYear()}`;
        outputDiv.innerHTML += `<p class="p-3 bg-green-300 rounded-xl mb-2 shadow-md text-gray-900 font-semibold hover:scale-105 transform transition duration-200">Next Interval After Today: ${nextDateStr}</p>`;
    }
}
</script>

</body>
</html>
